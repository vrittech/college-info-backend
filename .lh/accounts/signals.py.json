{
    "sourceFile": "accounts/signals.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1739425665260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739428521822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +0,0 @@\n-# signals.py\n-\n-from django.db.models.signals import post_save\n-from django.dispatch import receiver\n-from .models import CustomUser,GroupExtension\n-\n-@receiver(post_save, sender=CustomUser)\n-def set_position_same_as_id(sender, instance, created, **kwargs):\n-    if created and instance.position != instance.id:\n-        instance.position = instance.id\n-        instance.save()\n-\n-        \n-# @receiver(post_save, sender=ProjectService)\n-# def set_position_same_as_id(sender, instance, created, **kwargs):\n-#     if created and instance.position != instance.id:\n-#         instance.position = instance.id\n-#         instance.save()\n-\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739943889475,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,63 @@\n+from django.db.models.signals import m2m_changed\n+from django.dispatch import receiver\n+from django.contrib.auth.models import Group, Permission\n+from your_app.models import College, CustomUser  # Update with actual models\n \n+@receiver(m2m_changed, sender=College.users.through)  # Ensure the related field is correct\n+def assign_college_admin_group(sender, instance, action, pk_set, **kwargs):\n+    \"\"\"\n+    When a user is assigned to a college, assign them to the 'College Admin' group.\n+    Only applicable if the user is assigned to at least one college.\n+    \"\"\"\n+    if action == \"post_add\":  # Ensure it's triggered only after assignment\n+\n+        # Ensure 'College Admin' group exists\n+        college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n+\n+        if created:\n+            # Define required permissions\n+            permissions_to_assign = [\n+                # Request Submission - CRU\n+                \"add_request_submission\", \"change_request_submission\", \"view_request_submission\",\n+\n+                # College Management - CRU\n+                \"add_college\", \"change_college\", \"view_college\",\n+\n+                # Courses and Fees - CRUD\n+                \"add_courses_and_fees\", \"change_courses_and_fees\", \"delete_courses_and_fees\", \"view_courses_and_fees\",\n+\n+                # Facilities - CRUD\n+                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+\n+                # College Gallery - CRUD\n+                \"add_college_gallery\", \"change_college_gallery\", \"delete_college_gallery\", \"view_college_gallery\",\n+\n+                # FAQ about College - CRUD\n+                \"add_college_faqs\", \"change_college_faqs\", \"delete_college_faqs\", \"view_college_faqs\",\n+\n+                # Inquiry - View Only\n+                \"view_inquiry\",\n+\n+                # Contact Us - CRU\n+                \"add_contact\", \"change_contact\", \"view_contact\",\n+\n+                # Own Profile - CRU\n+                \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n+            ]\n+\n+            # Assign permissions to the group\n+            for perm_name in permissions_to_assign:\n+                try:\n+                    permission = Permission.objects.get(codename=perm_name)\n+                    college_admin_group.permissions.add(permission)\n+                except Permission.DoesNotExist:\n+                    print(f\"Permission '{perm_name}' not found.\")\n+\n+        # Assign users to the 'College Admin' group only if they are assigned to a college\n+        for user_id in pk_set:\n+            user = CustomUser.objects.get(pk=user_id)\n+\n+            # Ensure the user has at least one college\n+            if user.colleges.exists():  # Assuming 'colleges' is the related_name\n+                user.groups.add(college_admin_group)  # Add to group\n+                user.save()\n"
                },
                {
                    "date": 1739943897380,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n from django.db.models.signals import m2m_changed\n from django.dispatch import receiver\n from django.contrib.auth.models import Group, Permission\n-from your_app.models import College, CustomUser  # Update with actual models\n+from acc.models import College, CustomUser  # Update with actual models\n \n @receiver(m2m_changed, sender=College.users.through)  # Ensure the related field is correct\n def assign_college_admin_group(sender, instance, action, pk_set, **kwargs):\n     \"\"\"\n"
                },
                {
                    "date": 1739945514792,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,30 @@\n-from django.db.models.signals import m2m_changed\n+from django.db.models.signals import post_save\n from django.dispatch import receiver\n from django.contrib.auth.models import Group, Permission\n-from acc.models import College, CustomUser  # Update with actual models\n+from your_app.models import College, CustomUser  # Update with actual model paths\n \n-@receiver(m2m_changed, sender=College.users.through)  # Ensure the related field is correct\n-def assign_college_admin_group(sender, instance, action, pk_set, **kwargs):\n+@receiver(post_save, sender=CustomUser)\n+def assign_college_admin_group(sender, instance, created, **kwargs):\n     \"\"\"\n-    When a user is assigned to a college, assign them to the 'College Admin' group.\n-    Only applicable if the user is assigned to at least one college.\n+    When a user is assigned a college, assign them to the 'College Admin' group.\n+    Ensures only assigned users become College Admins.\n     \"\"\"\n-    if action == \"post_add\":  # Ensure it's triggered only after assignment\n-\n-        # Ensure 'College Admin' group exists\n+    if instance.college:  # Check if the user is assigned to a college\n+        # Ensure the 'College Admin' group exists\n         college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n-            # Define required permissions\n+            # Define necessary permissions\n             permissions_to_assign = [\n-                # Request Submission - CRU\n                 \"add_request_submission\", \"change_request_submission\", \"view_request_submission\",\n-\n-                # College Management - CRU\n                 \"add_college\", \"change_college\", \"view_college\",\n-\n-                # Courses and Fees - CRUD\n                 \"add_courses_and_fees\", \"change_courses_and_fees\", \"delete_courses_and_fees\", \"view_courses_and_fees\",\n-\n-                # Facilities - CRUD\n                 \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-\n-                # College Gallery - CRUD\n                 \"add_college_gallery\", \"change_college_gallery\", \"delete_college_gallery\", \"view_college_gallery\",\n-\n-                # FAQ about College - CRUD\n                 \"add_college_faqs\", \"change_college_faqs\", \"delete_college_faqs\", \"view_college_faqs\",\n-\n-                # Inquiry - View Only\n                 \"view_inquiry\",\n-\n-                # Contact Us - CRU\n                 \"add_contact\", \"change_contact\", \"view_contact\",\n-\n-                # Own Profile - CRU\n                 \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n             ]\n \n             # Assign permissions to the group\n@@ -50,14 +32,8 @@\n                 try:\n                     permission = Permission.objects.get(codename=perm_name)\n                     college_admin_group.permissions.add(permission)\n                 except Permission.DoesNotExist:\n-                    print(f\"Permission '{perm_name}' not found.\")\n+                    print(f\"Permission '{perm_name}' does not exist.\")\n \n-        # Assign users to the 'College Admin' group only if they are assigned to a college\n-        for user_id in pk_set:\n-            user = CustomUser.objects.get(pk=user_id)\n-\n-            # Ensure the user has at least one college\n-            if user.colleges.exists():  # Assuming 'colleges' is the related_name\n-                user.groups.add(college_admin_group)  # Add to group\n-                user.save()\n+        # Assign the user to the 'College Admin' group\n+        instance.groups.add(college_admin_group)\n"
                },
                {
                    "date": 1739945535659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     Ensures only assigned users become College Admins.\n     \"\"\"\n     if instance.college:  # Check if the user is assigned to a college\n         # Ensure the 'College Admin' group exists\n-        college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n+        college_admin_group, created = Group.objects.get_or_create(name=\"CollegeAdmin\")\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n"
                },
                {
                    "date": 1739945553230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n from django.db.models.signals import post_save\n from django.dispatch import receiver\n from django.contrib.auth.models import Group, Permission\n-from your_app.models import College, CustomUser  # Update with actual model paths\n+from accounts.models import College, CustomUser  # Update with actual model paths\n \n @receiver(post_save, sender=CustomUser)\n def assign_college_admin_group(sender, instance, created, **kwargs):\n     \"\"\"\n"
                },
                {
                    "date": 1739945569134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     Ensures only assigned users become College Admins.\n     \"\"\"\n     if instance.college:  # Check if the user is assigned to a college\n         # Ensure the 'College Admin' group exists\n-        college_admin_group, created = Group.objects.get_or_create(name=\"CollegeAdmin\")\n+        college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n"
                },
                {
                    "date": 1742884339012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,39 +1,40 @@\n from django.db.models.signals import post_save\n from django.dispatch import receiver\n from django.contrib.auth.models import Group, Permission\n-from accounts.models import College, CustomUser  # Update with actual model paths\n+from accounts.models import CustomUser  # Update as per your app\n \n+# üìå Ensure College Admin group always exists when saving any CustomUser\n @receiver(post_save, sender=CustomUser)\n def assign_college_admin_group(sender, instance, created, **kwargs):\n-    \"\"\"\n-    When a user is assigned a college, assign them to the 'College Admin' group.\n-    Ensures only assigned users become College Admins.\n-    \"\"\"\n-    if instance.college:  # Check if the user is assigned to a college\n-        # Ensure the 'College Admin' group exists\n+    if instance.college:\n+        # Get or create College Admin group\n         college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n-            # Define necessary permissions\n+            # Assign only if it's newly created\n             permissions_to_assign = [\n-                \"add_request_submission\", \"change_request_submission\", \"view_request_submission\",\n+                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\n                 \"add_college\", \"change_college\", \"view_college\",\n-                \"add_courses_and_fees\", \"change_courses_and_fees\", \"delete_courses_and_fees\", \"view_courses_and_fees\",\n+                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n                 \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-                \"add_college_gallery\", \"change_college_gallery\", \"delete_college_gallery\", \"view_college_gallery\",\n-                \"add_college_faqs\", \"change_college_faqs\", \"delete_college_faqs\", \"view_college_faqs\",\n+                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n                 \"view_inquiry\",\n                 \"add_contact\", \"change_contact\", \"view_contact\",\n-                \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n+                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n             ]\n-\n-            # Assign permissions to the group\n-            for perm_name in permissions_to_assign:\n+            for codename in permissions_to_assign:\n                 try:\n-                    permission = Permission.objects.get(codename=perm_name)\n+                    permission = Permission.objects.get(codename=codename)\n                     college_admin_group.permissions.add(permission)\n                 except Permission.DoesNotExist:\n-                    print(f\"Permission '{perm_name}' does not exist.\")\n+                    print(f\"Permission '{codename}' does not exist.\")\n \n-        # Assign the user to the 'College Admin' group\n         instance.groups.add(college_admin_group)\n+\n+\n+# ‚úÖ Ensure College Admin group always exists ‚Äî even when other groups are created\n+@receiver(post_save, sender=Group)\n+def ensure_college_admin_group_exists(sender, instance, created, **kwargs):\n+    if instance.name.lower() != \"college admin\":\n+        Group.objects.get_or_create(name=\"College Admin\")\n"
                },
                {
                    "date": 1742884424690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,40 +1,39 @@\n from django.db.models.signals import post_save\n from django.dispatch import receiver\n from django.contrib.auth.models import Group, Permission\n-from accounts.models import CustomUser  # Update as per your app\n+from accounts.models import College, CustomUser  # Update with actual model paths\n \n-# üìå Ensure College Admin group always exists when saving any CustomUser\n @receiver(post_save, sender=CustomUser)\n def assign_college_admin_group(sender, instance, created, **kwargs):\n-    if instance.college:\n-        # Get or create College Admin group\n+    \"\"\"\n+    When a user is assigned a college, assign them to the 'College Admin' group.\n+    Ensures only assigned users become College Admins.\n+    \"\"\"\n+    if instance.college:  # Check if the user is assigned to a college\n+        # Ensure the 'College Admin' group exists\n         college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n-            # Assign only if it's newly created\n+            # Define necessary permissions\n             permissions_to_assign = [\n-                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\n+                \"add_request_submission\", \"change_request_submission\", \"view_request_submission\",\n                 \"add_college\", \"change_college\", \"view_college\",\n-                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+                \"add_courses_and_fees\", \"change_courses_and_fees\", \"delete_courses_and_fees\", \"view_courses_and_fees\",\n                 \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n-                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+                \"add_college_gallery\", \"change_college_gallery\", \"delete_college_gallery\", \"view_college_gallery\",\n+                \"add_college_faqs\", \"change_college_faqs\", \"delete_college_faqs\", \"view_college_faqs\",\n                 \"view_inquiry\",\n                 \"add_contact\", \"change_contact\", \"view_contact\",\n-                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+                \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n             ]\n-            for codename in permissions_to_assign:\n+\n+            # Assign permissions to the group\n+            for perm_name in permissions_to_assign:\n                 try:\n-                    permission = Permission.objects.get(codename=codename)\n+                    permission = Permission.objects.get(codename=perm_name)\n                     college_admin_group.permissions.add(permission)\n                 except Permission.DoesNotExist:\n-                    print(f\"Permission '{codename}' does not exist.\")\n+                    print(f\"Permission '{perm_name}' does not exist.\")\n \n+        # Assign the user to the 'College Admin' group\n         instance.groups.add(college_admin_group)\n-\n-\n-# ‚úÖ Ensure College Admin group always exists ‚Äî even when other groups are created\n-@receiver(post_save, sender=Group)\n-def ensure_college_admin_group_exists(sender, instance, created, **kwargs):\n-    if instance.name.lower() != \"college admin\":\n-        Group.objects.get_or_create(name=\"College Admin\")\n"
                },
                {
                    "date": 1742884454283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,18 +15,17 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-                \"add_request_submission\", \"change_request_submission\", \"view_request_submission\",\n-                \"add_college\", \"change_college\", \"view_college\",\n-                \"add_courses_and_fees\", \"change_courses_and_fees\", \"delete_courses_and_fees\", \"view_courses_and_fees\",\n-                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-                \"add_college_gallery\", \"change_college_gallery\", \"delete_college_gallery\", \"view_college_gallery\",\n-                \"add_college_faqs\", \"change_college_faqs\", \"delete_college_faqs\", \"view_college_faqs\",\n-                \"view_inquiry\",\n-                \"add_contact\", \"change_contact\", \"view_contact\",\n-                \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n-            ]\n+            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+            \"add_college\", \"change_college\", \"view_college\",\n+            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+            \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+            \"add_contact\", \"change_contact\", \"view_contact\",\n+            \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n+        ]\n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884466529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,17 +15,17 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n-            \"add_college\", \"change_college\", \"view_college\",\n-            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n-            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n-            \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n-            \"add_contact\", \"change_contact\", \"view_contact\",\n-            \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-        ]\n+                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+                \"add_college\", \"change_college\", \"view_college\",\n+                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+                \"add_contact\", \"change_contact\", \"view_contact\",\n+                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n+            ]\n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884476416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,17 +15,17 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n-                \"add_college\", \"change_college\", \"view_college\",\n-                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n-                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n-                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n-                \"add_contact\", \"change_contact\", \"view_contact\",\n-                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-            ]\n+            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+            \"add_college\", \"change_college\", \"view_college\",\n+            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+            \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+            \"add_contact\", \"change_contact\", \"view_contact\",\n+            \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n+        ]\n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884649989,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,18 +14,19 @@\n         college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n             # Define necessary permissions\n-            permissions_to_assign = [\n+               permissions_to_assign = [\n             \"add_customuser\", \"change_customuser\", \"view_customuser\",\n             \"add_college\", \"change_college\", \"view_college\",\n             \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n             \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n             \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n             \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n             \"add_contact\", \"change_contact\", \"view_contact\",\n             \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-        ]\n+        ] \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n+            ]\n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884658166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,19 +14,18 @@\n         college_admin_group, created = Group.objects.get_or_create(name=\"College Admin\")\n \n         if created:\n             # Define necessary permissions\n-               permissions_to_assign = [\n+            permissions_to_assign = [\n             \"add_customuser\", \"change_customuser\", \"view_customuser\",\n             \"add_college\", \"change_college\", \"view_college\",\n             \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n             \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n             \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n             \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n             \"add_contact\", \"change_contact\", \"view_contact\",\n             \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-        ] \"add_custom_user\", \"change_custom_user\", \"view_custom_user\",\n-            ]\n+        ] \n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884665844,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n             \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n             \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n             \"add_contact\", \"change_contact\", \"view_contact\",\n             \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-        ] \n+            ] \n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n"
                },
                {
                    "date": 1742884703707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,4 +35,10 @@\n                     print(f\"Permission '{perm_name}' does not exist.\")\n \n         # Assign the user to the 'College Admin' group\n         instance.groups.add(college_admin_group)\n+\n+# ‚úÖ Ensure College Admin group always exists ‚Äî even when other groups are created\n+@receiver(post_save, sender=Group)\n+def ensure_college_admin_group_exists(sender, instance, created, **kwargs):\n+    if instance.name.lower() != \"college admin\":\n+        Group.objects.get_or_create(name=\"College Admin\")\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742884766455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,30 @@\n \n         # Assign the user to the 'College Admin' group\n         instance.groups.add(college_admin_group)\n \n-# ‚úÖ Ensure College Admin group always exists ‚Äî even when other groups are created\n @receiver(post_save, sender=Group)\n def ensure_college_admin_group_exists(sender, instance, created, **kwargs):\n     if instance.name.lower() != \"college admin\":\n-        Group.objects.get_or_create(name=\"College Admin\")\n\\ No newline at end of file\n+        # Try to get or create \"College Admin\" group\n+        college_admin_group, is_created = Group.objects.get_or_create(name=\"College Admin\")\n+\n+        if is_created:\n+            # If created, assign permissions\n+            permissions_to_assign = [\n+                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+                \"add_college\", \"change_college\", \"view_college\",\n+                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+                \"add_contact\", \"change_contact\", \"view_contact\",\n+                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\n+                \"view_inquiry\"\n+            ]\n+\n+            for codename in permissions_to_assign:\n+                try:\n+                    permission = Permission.objects.get(codename=codename)\n+                    college_admin_group.permissions.add(permission)\n+                except Permission.DoesNotExist:\n+                    print(f\"‚ö†Ô∏è Warning: Permission '{codename}' does not exist.\")\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742884774402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,5 +61,5 @@\n                 try:\n                     permission = Permission.objects.get(codename=codename)\n                     college_admin_group.permissions.add(permission)\n                 except Permission.DoesNotExist:\n-                    print(f\"‚ö†Ô∏è Warning: Permission '{codename}' does not exist.\")\n\\ No newline at end of file\n+                    print(f\"Warning: Permission '{codename}' does not exist.\")\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742885836813,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,18 +15,77 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n-            \"add_college\", \"change_college\", \"view_college\",\n-            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n-            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n-            \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n-            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n-            \"add_contact\", \"change_contact\", \"view_contact\",\n-            \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\"view_inquiry\",\n-            ] \n+    # Custom User\n+    \"add_customuser\", \"change_customuser\", \"view_customuser\",\n \n+    # Affiliation\n+    \"view_affiliation\",\n+\n+    # College\n+    \"add_college\", \"change_college\", \"view_college\",\n+\n+    # College FAQs\n+    \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+\n+    # College Gallery\n+    \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+\n+    # College Type\n+    \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n+\n+    # Contact\n+    \"add_contact\", \"change_contact\", \"view_contact\",\n+\n+    # Course\n+    \"view_course\",\n+\n+    # Course Curriculum File\n+    \"view_coursecurriculumfile\",\n+\n+    # Courses and Fees\n+    \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+\n+    # Discipline\n+    \"view_discipline\",\n+\n+    # District\n+    \"view_district\",\n+\n+    # Event\n+    \"view_event\",\n+    \"view_eventcategory\",\n+\n+    # College Facility\n+    \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n+\n+    # Facility (general)\n+    \"view_facility\",\n+\n+    # Faculty\n+    \"view_faculty\",\n+\n+    # Inquiry\n+    \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n+\n+    # Level and Sublevel\n+    \"view_level\", \"view_sublevel\",\n+\n+    # Notification\n+    \"view_notification\",\n+\n+    # Request Submission\n+    \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n+\n+    # College Social Media\n+    \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n+\n+    # Social Media\n+    \"view_socialmedia\",\n+]\n+ \n+\n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n                     permission = Permission.objects.get(codename=perm_name)\n"
                },
                {
                    "date": 1742885842898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,75 +15,75 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-    # Custom User\n-    \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+            # Custom User\n+            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n \n-    # Affiliation\n-    \"view_affiliation\",\n+            # Affiliation\n+            \"view_affiliation\",\n \n-    # College\n-    \"add_college\", \"change_college\", \"view_college\",\n+            # College\n+            \"add_college\", \"change_college\", \"view_college\",\n \n-    # College FAQs\n-    \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+            # College FAQs\n+            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n \n-    # College Gallery\n-    \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+            # College Gallery\n+            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n \n-    # College Type\n-    \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n+            # College Type\n+            \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n \n-    # Contact\n-    \"add_contact\", \"change_contact\", \"view_contact\",\n+            # Contact\n+            \"add_contact\", \"change_contact\", \"view_contact\",\n \n-    # Course\n-    \"view_course\",\n+            # Course\n+            \"view_course\",\n \n-    # Course Curriculum File\n-    \"view_coursecurriculumfile\",\n+            # Course Curriculum File\n+            \"view_coursecurriculumfile\",\n \n-    # Courses and Fees\n-    \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+            # Courses and Fees\n+            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n \n-    # Discipline\n-    \"view_discipline\",\n+            # Discipline\n+            \"view_discipline\",\n \n-    # District\n-    \"view_district\",\n+            # District\n+            \"view_district\",\n \n-    # Event\n-    \"view_event\",\n-    \"view_eventcategory\",\n+            # Event\n+            \"view_event\",\n+            \"view_eventcategory\",\n \n-    # College Facility\n-    \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n+            # College Facility\n+            \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n \n-    # Facility (general)\n-    \"view_facility\",\n+            # Facility (general)\n+            \"view_facility\",\n \n-    # Faculty\n-    \"view_faculty\",\n+            # Faculty\n+            \"view_faculty\",\n \n-    # Inquiry\n-    \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n+            # Inquiry\n+            \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n \n-    # Level and Sublevel\n-    \"view_level\", \"view_sublevel\",\n+            # Level and Sublevel\n+            \"view_level\", \"view_sublevel\",\n \n-    # Notification\n-    \"view_notification\",\n+            # Notification\n+            \"view_notification\",\n \n-    # Request Submission\n-    \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n+            # Request Submission\n+            \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n \n-    # College Social Media\n-    \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n+            # College Social Media\n+            \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n \n-    # Social Media\n-    \"view_socialmedia\",\n-]\n+            # Social Media\n+            \"view_socialmedia\",\n+        ]\n  \n \n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n"
                },
                {
                    "date": 1742885848208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,77 +15,78 @@\n \n         if created:\n             # Define necessary permissions\n             permissions_to_assign = [\n-            # Custom User\n-            \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+                # Custom User\n+                \"add_customuser\", \"change_customuser\", \"view_customuser\",\n \n-            # Affiliation\n-            \"view_affiliation\",\n+                # Affiliation\n+                \"view_affiliation\",\n \n-            # College\n-            \"add_college\", \"change_college\", \"view_college\",\n+                # College\n+                \"add_college\", \"change_college\", \"view_college\",\n \n-            # College FAQs\n-            \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+                # College FAQs\n+                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n \n-            # College Gallery\n-            \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n+                # College Gallery\n+                \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n \n-            # College Type\n-            \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n+                # College Type\n+                \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n \n-            # Contact\n-            \"add_contact\", \"change_contact\", \"view_contact\",\n+                # Contact\n+                \"add_contact\", \"change_contact\", \"view_contact\",\n \n-            # Course\n-            \"view_course\",\n+                # Course\n+                \"view_course\",\n \n-            # Course Curriculum File\n-            \"view_coursecurriculumfile\",\n+                # Course Curriculum File\n+                \"view_coursecurriculumfile\",\n \n-            # Courses and Fees\n-            \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n+                # Courses and Fees\n+                \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n \n-            # Discipline\n-            \"view_discipline\",\n+                # Discipline\n+                \"view_discipline\",\n \n-            # District\n-            \"view_district\",\n+                # District\n+                \"view_district\",\n \n-            # Event\n-            \"view_event\",\n-            \"view_eventcategory\",\n+                # Event\n+                \"view_event\",\n+                \"view_eventcategory\",\n \n-            # College Facility\n-            \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n+                # College Facility\n+                \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n \n-            # Facility (general)\n-            \"view_facility\",\n+                # Facility (general)\n+                \"view_facility\",\n \n-            # Faculty\n-            \"view_faculty\",\n+                # Faculty\n+                \"view_faculty\",\n \n-            # Inquiry\n-            \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n+                # Inquiry\n+                \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n \n-            # Level and Sublevel\n-            \"view_level\", \"view_sublevel\",\n+                # Level and Sublevel\n+                \"view_level\", \"view_sublevel\",\n \n-            # Notification\n-            \"view_notification\",\n+                # Notification\n+                \"view_notification\",\n \n-            # Request Submission\n-            \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n+                # Request Submission\n+                \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n \n-            # College Social Media\n-            \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n+                # College Social Media\n+                \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n \n-            # Social Media\n-            \"view_socialmedia\",\n-        ]\n- \n+                # Social Media\n+                \"view_socialmedia\",\n+            ]\n \n+            # Create the group \n+\n             # Assign permissions to the group\n             for perm_name in permissions_to_assign:\n                 try:\n                     permission = Permission.objects.get(codename=perm_name)\n"
                },
                {
                    "date": 1742885869862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,17 +105,74 @@\n \n         if is_created:\n             # If created, assign permissions\n             permissions_to_assign = [\n+                # Custom User\n                 \"add_customuser\", \"change_customuser\", \"view_customuser\",\n+\n+                # Affiliation\n+                \"view_affiliation\",\n+\n+                # College\n                 \"add_college\", \"change_college\", \"view_college\",\n+\n+                # College FAQs\n+                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n+\n+                # College Gallery\n                 \"add_collegegallery\", \"change_collegegallery\", \"delete_collegegallery\", \"view_collegegallery\",\n-                \"add_collegefaqs\", \"change_collegefaqs\", \"delete_collegefaqs\", \"view_collegefaqs\",\n-                \"add_facility\", \"change_facility\", \"delete_facility\", \"view_facility\",\n+\n+                # College Type\n+                \"add_collegetype\", \"change_collegetype\", \"delete_collegetype\", \"view_collegetype\",\n+\n+                # Contact\n+                \"add_contact\", \"change_contact\", \"view_contact\",\n+\n+                # Course\n+                \"view_course\",\n+\n+                # Course Curriculum File\n+                \"view_coursecurriculumfile\",\n+\n+                # Courses and Fees\n                 \"add_coursesandfees\", \"change_coursesandfees\", \"delete_coursesandfees\", \"view_coursesandfees\",\n-                \"add_contact\", \"change_contact\", \"view_contact\",\n-                \"add_requestsubmission\", \"change_requestsubmission\", \"view_requestsubmission\",\n-                \"view_inquiry\"\n+\n+                # Discipline\n+                \"view_discipline\",\n+\n+                # District\n+                \"view_district\",\n+\n+                # Event\n+                \"view_event\",\n+                \"view_eventcategory\",\n+\n+                # College Facility\n+                \"add_collegefacility\", \"change_collegefacility\", \"delete_collegefacility\", \"view_collegefacility\",\n+\n+                # Facility (general)\n+                \"view_facility\",\n+\n+                # Faculty\n+                \"view_faculty\",\n+\n+                # Inquiry\n+                \"add_inquiry\", \"change_inquiry\", \"view_inquiry\",\n+\n+                # Level and Sublevel\n+                \"view_level\", \"view_sublevel\",\n+\n+                # Notification\n+                \"view_notification\",\n+\n+                # Request Submission\n+                \"add_requestsubmission\", \"change_requestsubmission\", \"delete_requestsubmission\", \"view_requestsubmission\",\n+\n+                # College Social Media\n+                \"add_collegesocialmedia\", \"change_collegesocialmedia\", \"delete_collegesocialmedia\", \"view_collegesocialmedia\",\n+\n+                # Social Media\n+                \"view_socialmedia\",\n             ]\n \n             for codename in permissions_to_assign:\n                 try:\n"
                }
            ],
            "date": 1739425665260,
            "name": "Commit-0",
            "content": "# signals.py\n\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\nfrom .models import CustomUser,GroupExtension\n\n@receiver(post_save, sender=CustomUser)\ndef set_position_same_as_id(sender, instance, created, **kwargs):\n    if created and instance.position != instance.id:\n        instance.position = instance.id\n        instance.save()\n\n        \n# @receiver(post_save, sender=ProjectService)\n# def set_position_same_as_id(sender, instance, created, **kwargs):\n#     if created and instance.position != instance.id:\n#         instance.position = instance.id\n#         instance.save()\n\n"
        }
    ]
}