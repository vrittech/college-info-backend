{
    "sourceFile": "accounts/viewsets/group_viewsets.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1738669112140,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1738669117315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n from django.contrib.auth.models import Group, Permission\n from rest_framework import viewsets\n from rest_framework.permissions import IsAdminUser\n from ..serializers.group_serializers import GroupSerializer\n+from ..uti\n \n-\n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n     permission_classes = [IsAdminUser]\n"
                },
                {
                    "date": 1738669122403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n from django.contrib.auth.models import Group, Permission\n from rest_framework import viewsets\n from rest_framework.permissions import IsAdminUser\n from ..serializers.group_serializers import GroupSerializer\n-from ..uti\n+from ..utilities.pagination import MyPageNumberPagination\n \n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n"
                },
                {
                    "date": 1741502460249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,6 +7,8 @@\n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n     permission_classes = [IsAdminUser]\n+    pagination_class = MyPageNumberPagination\n+    \n \n \n"
                },
                {
                    "date": 1741502466126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,14 @@\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n     permission_classes = [IsAdminUser]\n     pagination_class = MyPageNumberPagination\n-    \n+    filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n+    search_fields = ['id','name']\n+    ordering_fields = ['id','name']\n+    filterset_fields = {\n+        'id': ['exact'],\n+        'name': ['exact'],\n+        'created_date': ['exact', 'gte', 'lte'],\n+    }\n \n \n"
                },
                {
                    "date": 1741502476374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n from rest_framework import viewsets\n from rest_framework.permissions import IsAdminUser\n from ..serializers.group_serializers import GroupSerializer\n from ..utilities.pagination import MyPageNumberPagination\n+from django\n \n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n"
                },
                {
                    "date": 1741502512496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,10 @@\n from rest_framework import viewsets\n from rest_framework.permissions import IsAdminUser\n from ..serializers.group_serializers import GroupSerializer\n from ..utilities.pagination import MyPageNumberPagination\n-from django\n+from django_filters.rest_framework import DjangoFilterBackend\n+from rest_framework.filters import SearchFilter, OrderingFilter\n \n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n@@ -15,8 +16,7 @@\n     ordering_fields = ['id','name']\n     filterset_fields = {\n         'id': ['exact'],\n         'name': ['exact'],\n-        'created_date': ['exact', 'gte', 'lte'],\n     }\n \n \n"
                },
                {
                    "date": 1741580955113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,6 +17,8 @@\n     filterset_fields = {\n         'id': ['exact'],\n         'name': ['exact'],\n     }\n+    \n+    \n \n \n"
                },
                {
                    "date": 1741580968381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,7 +18,16 @@\n         'id': ['exact'],\n         'name': ['exact'],\n     }\n     \n+    def get_queryset(self):\n+        if self.request.user.is_superuser:\n+            return super().get_queryset()\n+        elif self.request.user.is_staff:\n+            return super().get_queryset()\n+        elif self.request.user.is_authenticated:\n+            return super().get_queryset().filter(id=self.request.user.id)\n+        else:\n+            return CustomUser.objects.none()\n     \n \n \n"
                },
                {
                    "date": 1741580973998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,8 @@\n             return super().get_queryset()\n         elif self.request.user.is_authenticated:\n             return super().get_queryset().filter(id=self.request.user.id)\n         else:\n-            return CustomUser.objects.none()\n+            return Group.objects.none()\n     \n \n \n"
                },
                {
                    "date": 1742535771554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n     filterset_fields = {\n-        'id': ['exact'],\n+        'id': ['exact','in'],\n         'name': ['exact'],\n     }\n     \n     def get_queryset(self):\n"
                },
                {
                    "date": 1742536190490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n     filterset_fields = {\n-        'id': ['exact','in'],\n+        'id': ['exact'],\n         'name': ['exact'],\n     }\n     \n     def get_queryset(self):\n"
                },
                {
                    "date": 1742536433201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,12 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n-    filterset_fields = {\n-        'id': ['exact'],\n-        'name': ['exact'],\n-    }\n+   filterc\n     \n     def get_queryset(self):\n         if self.request.user.is_superuser:\n             return super().get_queryset()\n"
                },
                {
                    "date": 1742536441001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n from ..serializers.group_serializers import GroupSerializer\n from ..utilities.pagination import MyPageNumberPagination\n from django_filters.rest_framework import DjangoFilterBackend\n from rest_framework.filters import SearchFilter, OrderingFilter\n+from \n \n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n@@ -13,9 +14,9 @@\n     pagination_class = MyPageNumberPagination\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n-   filterc\n+   filterclass = GroupFilter\n     \n     def get_queryset(self):\n         if self.request.user.is_superuser:\n             return super().get_queryset()\n"
                },
                {
                    "date": 1742536446877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n from ..serializers.group_serializers import GroupSerializer\n from ..utilities.pagination import MyPageNumberPagination\n from django_filters.rest_framework import DjangoFilterBackend\n from rest_framework.filters import SearchFilter, OrderingFilter\n-from \n+from ..utilities.groupfilter import GroupFilter\n \n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n@@ -14,9 +14,9 @@\n     pagination_class = MyPageNumberPagination\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n-   filterclass = GroupFilter\n+    filterclass = GroupFilter\n     \n     def get_queryset(self):\n         if self.request.user.is_superuser:\n             return super().get_queryset()\n"
                },
                {
                    "date": 1742537064801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n     pagination_class = MyPageNumberPagination\n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id','name']\n     ordering_fields = ['id','name']\n-    filterclass = GroupFilter\n+    filterset_class = GroupFilter\n     \n     def get_queryset(self):\n         if self.request.user.is_superuser:\n             return super().get_queryset()\n"
                },
                {
                    "date": 1742881392308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,4 +28,22 @@\n             return Group.objects.none()\n     \n \n \n+ef perform_protection_check(self, instance):\n+        if instance.name.lower() == \"college admin\":\n+            raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n+\n+    def destroy(self, request, *args, **kwargs):\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().destroy(request, *args, **kwargs)\n+\n+    def update(self, request, *args, **kwargs):\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().update(request, *args, **kwargs)\n+\n+    def partial_update(self, request, *args, **kwargs):\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().partial_update(request, *args, **kwargs)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742881399936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,22 +28,22 @@\n             return Group.objects.none()\n     \n \n \n-ef perform_protection_check(self, instance):\n-        if instance.name.lower() == \"college admin\":\n-            raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n+    def perform_protection_check(self, instance):\n+            if instance.name.lower() == \"college admin\":\n+                raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n \n-    def destroy(self, request, *args, **kwargs):\n-        instance = self.get_object()\n-        self.perform_protection_check(instance)\n-        return super().destroy(request, *args, **kwargs)\n+        def destroy(self, request, *args, **kwargs):\n+            instance = self.get_object()\n+            self.perform_protection_check(instance)\n+            return super().destroy(request, *args, **kwargs)\n \n-    def update(self, request, *args, **kwargs):\n-        instance = self.get_object()\n\\ No newline at end of file\n-        self.perform_protection_check(instance)\n-        return super().update(request, *args, **kwargs)\n+        def update(self, request, *args, **kwargs):\n+            instance = self.get_object()\n+            self.perform_protection_check(instance)\n+            return super().update(request, *args, **kwargs)\n \n-    def partial_update(self, request, *args, **kwargs):\n-        instance = self.get_object()\n-        self.perform_protection_check(instance)\n-        return super().partial_update(request, *args, **kwargs)\n+        def partial_update(self, request, *args, **kwargs):\n+            instance = self.get_object()\n+            self.perform_protection_check(instance)\n+            return super().partial_update(request, *args, **kwargs)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742881406247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             return Group.objects.none()\n     \n \n \n-    def perform_protection_check(self, instance):\n+            def perform_protection_check(self, instance):\n             if instance.name.lower() == \"college admin\":\n                 raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n \n         def destroy(self, request, *args, **kwargs):\n"
                },
                {
                    "date": 1742881415224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             return Group.objects.none()\n     \n \n \n-            def perform_protection_check(self, instance):\n+    def perform_protection_check(self, instance):\n             if instance.name.lower() == \"college admin\":\n                 raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n \n         def destroy(self, request, *args, **kwargs):\n"
                },
                {
                    "date": 1742881421650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,18 +32,18 @@\n     def perform_protection_check(self, instance):\n             if instance.name.lower() == \"college admin\":\n                 raise PermissionDenied(\"You are not allowed to edit or delete the 'College Admin' group.\")\n \n-        def destroy(self, request, *args, **kwargs):\n-            instance = self.get_object()\n-            self.perform_protection_check(instance)\n-            return super().destroy(request, *args, **kwargs)\n+    def destroy(self, request, *args, **kwargs):\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().destroy(request, *args, **kwargs)\n \n-        def update(self, request, *args, **kwargs):\n-            instance = self.get_object()\n-            self.perform_protection_check(instance)\n-            return super().update(request, *args, **kwargs)\n+    def update(self, request, *args, **kwargs):\n\\ No newline at end of file\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().update(request, *args, **kwargs)\n \n-        def partial_update(self, request, *args, **kwargs):\n-            instance = self.get_object()\n-            self.perform_protection_check(instance)\n-            return super().partial_update(request, *args, **kwargs)\n+    def partial_update(self, request, *args, **kwargs):\n+        instance = self.get_object()\n+        self.perform_protection_check(instance)\n+        return super().partial_update(request, *args, **kwargs)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1742881428848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,11 @@\n from ..utilities.pagination import MyPageNumberPagination\n from django_filters.rest_framework import DjangoFilterBackend\n from rest_framework.filters import SearchFilter, OrderingFilter\n from ..utilities.groupfilter import GroupFilter\n+from rest_framework.exceptions import PermissionDenied\n \n+\n class GroupViewSet(viewsets.ModelViewSet):\n     queryset = Group.objects.all().order_by('-id')\n     serializer_class = GroupSerializer\n     permission_classes = [IsAdminUser]\n"
                }
            ],
            "date": 1738669112140,
            "name": "Commit-0",
            "content": "from django.contrib.auth.models import Group, Permission\nfrom rest_framework import viewsets\nfrom rest_framework.permissions import IsAdminUser\nfrom ..serializers.group_serializers import GroupSerializer\n\n\nclass GroupViewSet(viewsets.ModelViewSet):\n    queryset = Group.objects.all().order_by('-id')\n    serializer_class = GroupSerializer\n    permission_classes = [IsAdminUser]\n\n\n"
        }
    ]
}