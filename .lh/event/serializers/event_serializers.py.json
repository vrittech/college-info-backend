{
    "sourceFile": "event/serializers/event_serializers.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 44,
            "patches": [
                {
                    "date": 1733477390024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733477435882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,55 @@\n from rest_framework import serializers\n from ..models import Event, EventCategory, EventOrganizer, EventGallery\n \n-# Serializer for listing events (basic view)\n-class EventListSerializers(serializers.ModelSerializer):\n-    # Nested fields for related models (just showing names or basic details)\n-    category = serializers.StringRelatedField(many=True)  # Show related categories by name\n-    organizer = serializers.StringRelatedField(many=True)  # Show related organizers by name\n+# Serializer for EventCategory\n+class EventCategorySerializer(serializers.ModelSerializer):\n+    class Meta:\n+        model = EventCategory\n+        fields = ['id', 'name', 'created_date_time', 'created_date', 'updated_date']\n \n+# Serializer for EventOrganizer\n+class EventOrganizerSerializer(serializers.ModelSerializer):\n     class Meta:\n+        model = EventOrganizer\n+        fields = ['id', 'name', 'image', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n+\n+# Serializer for EventGallery\n+class EventGallerySerializer(serializers.ModelSerializer):\n+    class Meta:\n+        model = EventGallery\n+        fields = ['id', 'image', 'is_featured_image', 'created_date_time', 'created_date', 'updated_date']\n+\n+# Serializer for listing event details (basic view)\n+class EventListSerializers(serializers.ModelSerializer):\n+    # Nested fields for related models (full object details)\n+    category = EventCategorySerializer(many=True)  # Full details of categories\n+    organizer = EventOrganizerSerializer(many=True)  # Full details of organizers\n+    gallery = EventGallerySerializer(many=True)  # Full details of gallery images\n+    \n+    class Meta:\n         model = Event\n         fields = '__all__'\n \n \n-# Serializer for retrieving detailed event information\n+# Serializer for retrieving complete event details (detailed view)\n class EventRetrieveSerializers(serializers.ModelSerializer):\n-    # Nested fields for related models (showing detailed info)\n-    category = serializers.StringRelatedField(many=True)\n-    organizer = serializers.StringRelatedField(many=True)\n-    gallery = serializers.StringRelatedField(many=True)  # Optional: For retrieving related images\n+    # Nested fields for related models (full object details)\n+    category = EventCategorySerializer(many=True)\n+    organizer = EventOrganizerSerializer(many=True)\n+    gallery = EventGallerySerializer(many=True)  # Optional: For retrieving related images\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n \n \n-# Serializer for creating or updating events\n+# Serializer for creating/updating event details (with full object serialization for related fields)\n class EventWriteSerializers(serializers.ModelSerializer):\n-    # Nested fields for related models\n-    category = serializers.PrimaryKeyRelatedField(queryset=EventCategory.objects.all(), many=True)\n-    organizer = serializers.PrimaryKeyRelatedField(queryset=EventOrganizer.objects.all(), many=True)\n-    gallery = serializers.PrimaryKeyRelatedField(queryset=EventGallery.objects.all(), many=True)\n+    # Nested serializers for related models (full object representation)\n+    category = EventCategorySerializer(many=True)  # For creating/updating full objects\n+    organizer = EventOrganizerSerializer(many=True)  # For creating/updating full objects\n+    gallery = EventGallerySerializer(many=True)  # For creating/updating full objects\n     \n     class Meta:\n         model = Event\n         fields = [\n@@ -50,12 +69,18 @@\n         # Create the Event instance\n         event = Event.objects.create(**validated_data)\n \n         # Handle many-to-many relationships\n-        event.category.set(category_data)\n-        event.organizer.set(organizer_data)\n-        event.gallery.set(gallery_data)\n+        # Create related EventCategory, EventOrganizer, EventGallery\n+        for category in category_data:\n+            event.category.add(EventCategory.objects.create(**category))\n \n+        for organizer in organizer_data:\n+            event.organizer.add(EventOrganizer.objects.create(**organizer))\n+\n+        for image in gallery_data:\n+            event.gallery.add(EventGallery.objects.create(**image))\n+\n         return event\n \n     def update(self, instance, validated_data):\n         # Handle the updating of related fields (many-to-many relationships)\n@@ -65,16 +90,24 @@\n \n         # Update fields that are present in validated_data\n         for attr, value in validated_data.items():\n             setattr(instance, attr, value)\n-        \n+\n         # Update many-to-many relationships\n         if category_data is not None:\n-            instance.category.set(category_data)\n+            instance.category.clear()  # Clear existing categories\n+            for category in category_data:\n+                instance.category.add(EventCategory.objects.create(**category))\n+\n         if organizer_data is not None:\n-            instance.organizer.set(organizer_data)\n+            instance.organizer.clear()  # Clear existing organizers\n+            for organizer in organizer_data:\n+                instance.organizer.add(EventOrganizer.objects.create(**organizer))\n+\n         if gallery_data is not None:\n-            instance.gallery.set(gallery_data)\n+            instance.gallery.clear()  # Clear existing gallery images\n+            for image in gallery_data:\n+                instance.gallery.add(EventGallery.objects.create(**image))\n \n         # Save the updated instance\n         instance.save()\n \n"
                },
                {
                    "date": 1733477444061,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,15 +51,9 @@\n     gallery = EventGallerySerializer(many=True)  # For creating/updating full objects\n     \n     class Meta:\n         model = Event\n-        fields = [\n-            'event_name', 'start_date', 'end_date', 'duration', 'event_type', 'venue', 'online_seat_limit', \n-            'offline_seat_limit', 'is_offline_seat_limit', 'is_online_seat_limit', 'is_registration', \n-            'registration_link', 'registration_type', 'amount', 'amount_type', 'amount_country', \n-            'description', 'is_featured_event', 'category', 'organizer', 'gallery', 'created_date_time', \n-            'created_date', 'updated_date'\n-        ]\n+        fields = '__'\n     \n     def create(self, validated_data):\n         # Handle the creation of related fields (many-to-many relationships)\n         category_data = validated_data.pop('category')\n"
                },
                {
                    "date": 1733477450119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n     gallery = EventGallerySerializer(many=True)  # For creating/updating full objects\n     \n     class Meta:\n         model = Event\n-        fields = '__'\n+        fields = '__all__'\n     \n     def create(self, validated_data):\n         # Handle the creation of related fields (many-to-many relationships)\n         category_data = validated_data.pop('category')\n"
                },
                {
                    "date": 1738231300943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,66 +43,59 @@\n         fields = '__all__'\n \n \n # Serializer for creating/updating event details (with full object serialization for related fields)\n+from rest_framework import serializers\n+from .models import Event, EventCategory, EventOrganizer, EventGallery\n+\n class EventWriteSerializers(serializers.ModelSerializer):\n-    # Nested serializers for related models (full object representation)\n-    category = EventCategorySerializer(many=True)  # For creating/updating full objects\n-    organizer = EventOrganizerSerializer(many=True)  # For creating/updating full objects\n-    gallery = EventGallerySerializer(many=True)  # For creating/updating full objects\n-    \n+    # Accept IDs instead of nested objects for many-to-many relationships\n+    category = serializers.PrimaryKeyRelatedField(\n+        many=True, queryset=EventCategory.objects.all()\n+    )\n+    organizer = serializers.PrimaryKeyRelatedField(\n+        many=True, queryset=EventOrganizer.objects.all()\n+    )\n+    gallery = serializers.PrimaryKeyRelatedField(\n+        many=True, queryset=EventGallery.objects.all()\n+    )\n+\n     class Meta:\n         model = Event\n         fields = '__all__'\n-    \n+\n     def create(self, validated_data):\n-        # Handle the creation of related fields (many-to-many relationships)\n-        category_data = validated_data.pop('category')\n-        organizer_data = validated_data.pop('organizer')\n-        gallery_data = validated_data.pop('gallery')\n+        # Extract related many-to-many field IDs\n+        category_ids = validated_data.pop('category', [])\n+        organizer_ids = validated_data.pop('organizer', [])\n+        gallery_ids = validated_data.pop('gallery', [])\n \n         # Create the Event instance\n         event = Event.objects.create(**validated_data)\n \n-        # Handle many-to-many relationships\n-        # Create related EventCategory, EventOrganizer, EventGallery\n-        for category in category_data:\n-            event.category.add(EventCategory.objects.create(**category))\n+        # Assign existing many-to-many objects using IDs\n+        event.category.set(category_ids)\n+        event.organizer.set(organizer_ids)\n+        event.gallery.set(gallery_ids)\n \n-        for organizer in organizer_data:\n-            event.organizer.add(EventOrganizer.objects.create(**organizer))\n-\n-        for image in gallery_data:\n-            event.gallery.add(EventGallery.objects.create(**image))\n-\n         return event\n \n     def update(self, instance, validated_data):\n-        # Handle the updating of related fields (many-to-many relationships)\n-        category_data = validated_data.pop('category', None)\n-        organizer_data = validated_data.pop('organizer', None)\n-        gallery_data = validated_data.pop('gallery', None)\n+        # Extract related many-to-many field IDs\n+        category_ids = validated_data.pop('category', None)\n+        organizer_ids = validated_data.pop('organizer', None)\n+        gallery_ids = validated_data.pop('gallery', None)\n \n-        # Update fields that are present in validated_data\n+        # Update normal fields\n         for attr, value in validated_data.items():\n             setattr(instance, attr, value)\n \n-        # Update many-to-many relationships\n-        if category_data is not None:\n-            instance.category.clear()  # Clear existing categories\n-            for category in category_data:\n-                instance.category.add(EventCategory.objects.create(**category))\n+        # Update many-to-many relationships only if provided\n+        if category_ids is not None:\n+            instance.category.set(category_ids)\n+        if organizer_ids is not None:\n+            instance.organizer.set(organizer_ids)\n+        if gallery_ids is not None:\n+            instance.gallery.set(gallery_ids)\n \n-        if organizer_data is not None:\n-            instance.organizer.clear()  # Clear existing organizers\n-            for organizer in organizer_data:\n-                instance.organizer.add(EventOrganizer.objects.create(**organizer))\n-\n-        if gallery_data is not None:\n-            instance.gallery.clear()  # Clear existing gallery images\n-            for image in gallery_data:\n-                instance.gallery.add(EventGallery.objects.create(**image))\n-\n-        # Save the updated instance\n         instance.save()\n-\n         return instance\n"
                },
                {
                    "date": 1738231308048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,12 +42,8 @@\n         model = Event\n         fields = '__all__'\n \n \n-# Serializer for creating/updating event details (with full object serialization for related fields)\n-from rest_framework import serializers\n-from .models import Event, EventCategory, EventOrganizer, EventGallery\n-\n class EventWriteSerializers(serializers.ModelSerializer):\n     # Accept IDs instead of nested objects for many-to-many relationships\n     category = serializers.PrimaryKeyRelatedField(\n         many=True, queryset=EventCategory.objects.all()\n"
                },
                {
                    "date": 1738236663709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,56 +42,76 @@\n         model = Event\n         fields = '__all__'\n \n \n+\n class EventWriteSerializers(serializers.ModelSerializer):\n-    # Accept IDs instead of nested objects for many-to-many relationships\n-    category = serializers.PrimaryKeyRelatedField(\n-        many=True, queryset=EventCategory.objects.all()\n-    )\n-    organizer = serializers.PrimaryKeyRelatedField(\n-        many=True, queryset=EventOrganizer.objects.all()\n-    )\n-    gallery = serializers.PrimaryKeyRelatedField(\n-        many=True, queryset=EventGallery.objects.all()\n-    )\n+    \"\"\"\n+    Serializer for handling event creation and image uploads.\n+    Many-to-Many fields are assigned using IDs, while images are uploaded separately to `EventGallery`.\n+    \"\"\"\n \n+    category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n+    organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n+    gallery_images = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n+\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n+    @transaction.atomic\n     def create(self, validated_data):\n-        # Extract related many-to-many field IDs\n+        \"\"\"\n+        Handles creation of an Event and uploads images to the gallery.\n+        \"\"\"\n+        # Extract Many-to-Many fields\n         category_ids = validated_data.pop('category', [])\n         organizer_ids = validated_data.pop('organizer', [])\n-        gallery_ids = validated_data.pop('gallery', [])\n \n+        # Extract images from request FILES\n+        images_data = []\n+        for key, file in self.context['request'].FILES.items():\n+            if key.startswith('images['):  # Accepts multiple images\n+                images_data.append(file)\n+\n         # Create the Event instance\n         event = Event.objects.create(**validated_data)\n \n-        # Assign existing many-to-many objects using IDs\n+        # Assign Many-to-Many relationships\n         event.category.set(category_ids)\n         event.organizer.set(organizer_ids)\n-        event.gallery.set(gallery_ids)\n \n+        # Save images in EventGallery\n+        for image_file in images_data:\n+            EventGallery.objects.create(event=event, image=image_file)\n+\n         return event\n \n+    @transaction.atomic\n     def update(self, instance, validated_data):\n-        # Extract related many-to-many field IDs\n+        \"\"\"\n+        Handles updating of an Event and uploads new images to the gallery.\n+        \"\"\"\n+        # Extract Many-to-Many fields\n         category_ids = validated_data.pop('category', None)\n         organizer_ids = validated_data.pop('organizer', None)\n-        gallery_ids = validated_data.pop('gallery', None)\n \n-        # Update normal fields\n-        for attr, value in validated_data.items():\n-            setattr(instance, attr, value)\n+        # Extract images from request FILES\n+        images_data = []\n+        for key, file in self.context['request'].FILES.items():\n+            if key.startswith('images['):  # Accepts multiple images\n+                images_data.append(file)\n \n-        # Update many-to-many relationships only if provided\n+        # Update instance fields\n+        instance = super().update(instance, validated_data)\n+\n+        # Update Many-to-Many relationships if provided\n         if category_ids is not None:\n             instance.category.set(category_ids)\n         if organizer_ids is not None:\n             instance.organizer.set(organizer_ids)\n-        if gallery_ids is not None:\n-            instance.gallery.set(gallery_ids)\n \n-        instance.save()\n-        return instance\n+        # Save new images in EventGallery\n+        for image_file in images_data:\n+            EventGallery.objects.create(event=instance, image=image_file)\n+\n+        return instance\n\\ No newline at end of file\n"
                },
                {
                    "date": 1738236672809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n from rest_framework import serializers\n from ..models import Event, EventCategory, EventOrganizer, EventGallery\n+from django.db import transaction\n \n+\n # Serializer for EventCategory\n class EventCategorySerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventCategory\n"
                },
                {
                    "date": 1738237881446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,10 +75,11 @@\n             if key.startswith('images['):  # Accepts multiple images\n                 images_data.append(file)\n \n         # Create the Event instance\n-        event = Event.objects.create(**validated_data)\n+        event = super().create(validated_data)\n \n+\n         # Assign Many-to-Many relationships\n         event.category.set(category_ids)\n         event.organizer.set(organizer_ids)\n \n"
                },
                {
                    "date": 1738237895187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,9 +77,8 @@\n \n         # Create the Event instance\n         event = super().create(validated_data)\n \n-\n         # Assign Many-to-Many relationships\n         event.category.set(category_ids)\n         event.organizer.set(organizer_ids)\n \n"
                },
                {
                    "date": 1738651944769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True)  # Full details of organizers\n-    gallery = EventGallerySerializer(many=True)  # Full details of gallery images\n+    image = EventGallerySerializer(many=True)  # Full details of gallery images\n     \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738651950241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n class EventRetrieveSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True)\n     organizer = EventOrganizerSerializer(many=True)\n-    gallery = EventGallerySerializer(many=True)  # Optional: For retrieving related images\n+    image = EventGallerySerializer(many=True)  # Optional: For retrieving related images\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738651955477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    gallery_images = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n+    image = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738651969262,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    image = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n+    gallery_images = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738651974446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    gallery_images = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n+    image = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738666501931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n \n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n-    category = EventCategorySerializer(many=True)  # Full details of categories\n+    category = EventCategorySerializer(many=True,read)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True)  # Full details of organizers\n     image = EventGallerySerializer(many=True)  # Full details of gallery images\n     \n     class Meta:\n"
                },
                {
                    "date": 1738666507294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n \n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n-    category = EventCategorySerializer(many=True,read)  # Full details of categories\n+    category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True)  # Full details of organizers\n     image = EventGallerySerializer(many=True)  # Full details of gallery images\n     \n     class Meta:\n"
                },
                {
                    "date": 1738666513939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n-    organizer = EventOrganizerSerializer(many=True)  # Full details of organizers\n+    organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n     image = EventGallerySerializer(many=True)  # Full details of gallery images\n     \n     class Meta:\n         model = Event\n"
                },
                {
                    "date": 1738666522012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,22 +25,20 @@\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n-    image = EventGallerySerializer(many=True)  # Full details of gallery images\n+    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     \n     class Meta:\n         model = Event\n         fields = '__all__'\n \n \n # Serializer for retrieving complete event details (detailed view)\n class EventRetrieveSerializers(serializers.ModelSerializer):\n-    # Nested fields for related models (full object details)\n-    category = EventCategorySerializer(many=True)\n-    organizer = EventOrganizerSerializer(many=True)\n-    image = EventGallerySerializer(many=True)  # Optional: For retrieving related images\n-\n+   category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n+    organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n+    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n"
                },
                {
                    "date": 1738666536453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n \n \n # Serializer for retrieving complete event details (detailed view)\n class EventRetrieveSerializers(serializers.ModelSerializer):\n-   category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n+    category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n     image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     class Meta:\n         model = Event\n"
                },
                {
                    "date": 1738669570153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    image = EventGallerySerializer(many=True, read_only=True, source='eventgallery_set')\n+    image = EventGallerySerializer(many=True, source='eventgallery_set')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738669591128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,9 @@\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    image = EventGallerySerializer(many=True, source='eventgallery_set')\n+    image = EventGallerySerializer(many=True, source='image')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1738834261567,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,34 +45,32 @@\n \n \n class EventWriteSerializers(serializers.ModelSerializer):\n     \"\"\"\n-    Serializer for handling event creation and image uploads.\n-    Many-to-Many fields are assigned using IDs, while images are uploaded separately to `EventGallery`.\n+    Serializer for handling event creation with multiple images.\n+    Accepts images using `images[0]`, `images[1]`, ..., not a single `image` key.\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n-    image = EventGallerySerializer(many=True, source='image')\n \n     class Meta:\n         model = Event\n         fields = '__all__'\n \n     @transaction.atomic\n     def create(self, validated_data):\n         \"\"\"\n-        Handles creation of an Event and uploads images to the gallery.\n+        Handles event creation and image uploads.\n         \"\"\"\n+        request = self.context.get(\"request\")\n+\n         # Extract Many-to-Many fields\n-        category_ids = validated_data.pop('category', [])\n-        organizer_ids = validated_data.pop('organizer', [])\n+        category_ids = validated_data.pop(\"category\", [])\n+        organizer_ids = validated_data.pop(\"organizer\", [])\n \n-        # Extract images from request FILES\n-        images_data = []\n-        for key, file in self.context['request'].FILES.items():\n-            if key.startswith('images['):  # Accepts multiple images\n-                images_data.append(file)\n+        # Extract multiple images from `images[0]`, `images[1]`, ...\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n         # Create the Event instance\n         event = super().create(validated_data)\n \n@@ -88,21 +86,20 @@\n \n     @transaction.atomic\n     def update(self, instance, validated_data):\n         \"\"\"\n-        Handles updating of an Event and uploads new images to the gallery.\n+        Handles event updates and new image uploads.\n         \"\"\"\n+        request = self.context.get(\"request\")\n+\n         # Extract Many-to-Many fields\n-        category_ids = validated_data.pop('category', None)\n-        organizer_ids = validated_data.pop('organizer', None)\n+        category_ids = validated_data.pop(\"category\", None)\n+        organizer_ids = validated_data.pop(\"organizer\", None)\n \n-        # Extract images from request FILES\n-        images_data = []\n-        for key, file in self.context['request'].FILES.items():\n-            if key.startswith('images['):  # Accepts multiple images\n-                images_data.append(file)\n+        # Extract multiple images from `images[0]`, `images[1]`, ...\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n-        # Update instance fields\n+        # Update the event instance\n         instance = super().update(instance, validated_data)\n \n         # Update Many-to-Many relationships if provided\n         if category_ids is not None:\n"
                },
                {
                    "date": 1738834475791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n \n class EventWriteSerializers(serializers.ModelSerializer):\n     \"\"\"\n     Serializer for handling event creation with multiple images.\n-    Accepts images using `images[0]`, `images[1]`, ..., not a single `image` key.\n+    Converts `category` and `organizer` from string to list of integers.\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n@@ -56,8 +56,20 @@\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n+    def to_internal_value(self, data):\n+        \"\"\"\n+        Converts string-based `category` and `organizer` fields to lists of integers.\n+        \"\"\"\n+        if isinstance(data.get(\"category\"), str):\n+            data[\"category\"] = [int(i.strip()) for i in data[\"category\"].split(\",\")]\n+\n+        if isinstance(data.get(\"organizer\"), str):\n+            data[\"organizer\"] = [int(i.strip()) for i in data[\"organizer\"].split(\",\")]\n+\n+        return super().to_internal_value(data)\n+\n     @transaction.atomic\n     def create(self, validated_data):\n         \"\"\"\n         Handles event creation and image uploads.\n"
                },
                {
                    "date": 1738834647670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,12 +43,34 @@\n         fields = '__all__'\n \n \n \n+def str_to_list(data, value_to_convert):\n+    \"\"\"\n+    Converts a string representation of a list into an actual list if necessary.\n+    \"\"\"\n+    try:\n+        mutable_data = data.dict()  # Convert QueryDict to standard dict if necessary\n+    except Exception:\n+        mutable_data = data\n+\n+    value_to_convert_data = mutable_data.get(value_to_convert)\n+\n+    if isinstance(value_to_convert_data, list):\n+        return mutable_data  # If already a list, return unchanged\n+\n+    try:\n+        variations = ast.literal_eval(value_to_convert_data)  # Convert string to list\n+        mutable_data[value_to_convert] = variations\n+        return mutable_data\n+    except ValueError as e:\n+        raise serializers.ValidationError({f'{value_to_convert}': str(e)}) from e\n+\n+\n class EventWriteSerializers(serializers.ModelSerializer):\n     \"\"\"\n     Serializer for handling event creation with multiple images.\n-    Converts `category` and `organizer` from string to list of integers.\n+    Uses `str_to_list()` to convert `category` and `organizer` from string to list.\n     \"\"\"\n \n     category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n     organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n@@ -58,15 +80,15 @@\n         fields = '__all__'\n \n     def to_internal_value(self, data):\n         \"\"\"\n-        Converts string-based `category` and `organizer` fields to lists of integers.\n+        Converts `category` and `organizer` from string to list using `str_to_list()`.\n         \"\"\"\n-        if isinstance(data.get(\"category\"), str):\n-            data[\"category\"] = [int(i.strip()) for i in data[\"category\"].split(\",\")]\n+        if data.get(\"category\"):\n+            data = str_to_list(data, \"category\")\n \n-        if isinstance(data.get(\"organizer\"), str):\n-            data[\"organizer\"] = [int(i.strip()) for i in data[\"organizer\"].split(\",\")]\n+        if data.get(\"organizer\"):\n+            data = str_to_list(data, \"organizer\")\n \n         return super().to_internal_value(data)\n \n     @transaction.atomic\n"
                },
                {
                    "date": 1738834658084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n from rest_framework import serializers\n from ..models import Event, EventCategory, EventOrganizer, EventGallery\n from django.db import transaction\n+import ast\n \n \n # Serializer for EventCategory\n class EventCategorySerializer(serializers.ModelSerializer):\n"
                },
                {
                    "date": 1738835359599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,11 +72,14 @@\n     Serializer for handling event creation with multiple images.\n     Uses `str_to_list()` to convert `category` and `organizer` from string to list.\n     \"\"\"\n \n-    category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n-    organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n+    category = EventCategorySerializer(many=True, read_only=True)\n+    organizer = EventOrganizerSerializer(many=True, read_only=True)\n \n+    category_ids = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all(), write_only=True, source=\"category\")\n+    organizer_ids = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all(), write_only=True, source=\"organizer\")\n+\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n"
                },
                {
                    "date": 1738835508634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,86 +44,11 @@\n         fields = '__all__'\n \n \n \n-def str_to_list(data, value_to_convert):\n-    \"\"\"\n-    Converts a string representation of a list into an actual list if necessary.\n-    \"\"\"\n-    try:\n-        mutable_data = data.dict()  # Convert QueryDict to standard dict if necessary\n-    except Exception:\n-        mutable_data = data\n \n-    value_to_convert_data = mutable_data.get(value_to_convert)\n \n-    if isinstance(value_to_convert_data, list):\n-        return mutable_data  # If already a list, return unchanged\n-\n-    try:\n-        variations = ast.literal_eval(value_to_convert_data)  # Convert string to list\n-        mutable_data[value_to_convert] = variations\n-        return mutable_data\n-    except ValueError as e:\n-        raise serializers.ValidationError({f'{value_to_convert}': str(e)}) from e\n-\n-\n-class EventWriteSerializers(serializers.ModelSerializer):\n-    \"\"\"\n-    Serializer for handling event creation with multiple images.\n-    Uses `str_to_list()` to convert `category` and `organizer` from string to list.\n-    \"\"\"\n-\n-    category = EventCategorySerializer(many=True, read_only=True)\n-    organizer = EventOrganizerSerializer(many=True, read_only=True)\n-\n-    category_ids = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all(), write_only=True, source=\"category\")\n-    organizer_ids = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all(), write_only=True, source=\"organizer\")\n-\n-    class Meta:\n-        model = Event\n-        fields = '__all__'\n-\n-    def to_internal_value(self, data):\n-        \"\"\"\n-        Converts `category` and `organizer` from string to list using `str_to_list()`.\n-        \"\"\"\n-        if data.get(\"category\"):\n-            data = str_to_list(data, \"category\")\n-\n-        if data.get(\"organizer\"):\n-            data = str_to_list(data, \"organizer\")\n-\n-        return super().to_internal_value(data)\n-\n     @transaction.atomic\n-    def create(self, validated_data):\n-        \"\"\"\n-        Handles event creation and image uploads.\n-        \"\"\"\n-        request = self.context.get(\"request\")\n-\n-        # Extract Many-to-Many fields\n-        category_ids = validated_data.pop(\"category\", [])\n-        organizer_ids = validated_data.pop(\"organizer\", [])\n-\n-        # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n-\n-        # Create the Event instance\n-        event = super().create(validated_data)\n-\n-        # Assign Many-to-Many relationships\n-        event.category.set(category_ids)\n-        event.organizer.set(organizer_ids)\n-\n-        # Save images in EventGallery\n-        for image_file in images_data:\n-            EventGallery.objects.create(event=event, image=image_file)\n-\n-        return event\n-\n-    @transaction.atomic\n     def update(self, instance, validated_data):\n         \"\"\"\n         Handles event updates and new image uploads.\n         \"\"\"\n"
                },
                {
                    "date": 1738835905793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,14 +44,87 @@\n         fields = '__all__'\n \n \n \n+def str_to_list(data, value_to_convert):\n+    \"\"\"\n+    Converts a string representation of a list into an actual list if necessary.\n+    \"\"\"\n+    try:\n+        mutable_data = data.dict()  # Convert QueryDict to standard dict if necessary\n+    except Exception:\n+        mutable_data = data\n \n+    value_to_convert_data = mutable_data.get(value_to_convert)\n \n+    if isinstance(value_to_convert_data, list):\n+        return mutable_data  # If already a list, return unchanged\n+\n+    try:\n+        variations = ast.literal_eval(value_to_convert_data)  # Convert string to list\n+        mutable_data[value_to_convert] = variations\n+        return mutable_data\n+    except ValueError as e:\n+        raise serializers.ValidationError({f'{value_to_convert}': str(e)}) from e\n+\n+\n+class EventWriteSerializers(serializers.ModelSerializer):\n+    \"\"\"\n+    Serializer for handling event creation with multiple images.\n+    Uses `str_to_list()` to convert `category` and `organizer` from string to list.\n+    \"\"\"\n+\n+    category = serializers.PrimaryKeyRelatedField(many=True, queryset=EventCategory.objects.all())\n+    organizer = serializers.PrimaryKeyRelatedField(many=True, queryset=EventOrganizer.objects.all())\n+\n+    class Meta:\n+        model = Event\n+        fields = '__all__'\n+\n+    def to_internal_value(self, data):\n+        \"\"\"\n+        Converts `category` and `organizer` from string to list using `str_to_list()`.\n+        \"\"\"\n+        if data.get(\"category\"):\n+            data = str_to_list(data, \"category\")\n+\n+        if data.get(\"organizer\"):\n+            data = str_to_list(data, \"organizer\")\n+\n+        return super().to_internal_value(data)\n+\n     @transaction.atomic\n+    def create(self, validated_data):\n+        \"\"\"\n+        Handles event creation and image uploads.\n+        \"\"\"\n+        request = self.context.get(\"request\")\n+\n+        # Extract Many-to-Many fields\n+        category_ids = validated_data.pop(\"category\", [])\n+        organizer_ids = validated_data.pop(\"organizer\", [])\n+\n+        # Extract multiple images from `images[0]`, `images[1]`, ...\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n+\n+        # Create the Event instance\n+        event = super().create(validated_data)\n+\n+        # Assign Many-to-Many relationships\n+        event.category.set(category_ids)\n+        event.organizer.set(organizer_ids)\n+\n+        # Save images in EventGallery\n+        for image_file in images_data:\n+            EventGallery.objects.create(event=event, image=image_file)\n+\n+        return event\n+\n+     @transaction.atomic\n     def update(self, instance, validated_data):\n         \"\"\"\n-        Handles event updates and new image uploads.\n+        Handles full (PUT) and partial (PATCH) updates for events.\n+        Supports new image uploads and Many-to-Many relationship updates.\n         \"\"\"\n         request = self.context.get(\"request\")\n \n         # Extract Many-to-Many fields\n"
                },
                {
                    "date": 1738835911238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,32 +119,32 @@\n \n         return event\n \n      @transaction.atomic\n-    def update(self, instance, validated_data):\n-        \"\"\"\n-        Handles full (PUT) and partial (PATCH) updates for events.\n-        Supports new image uploads and Many-to-Many relationship updates.\n-        \"\"\"\n-        request = self.context.get(\"request\")\n+        def update(self, instance, validated_data):\n+            \"\"\"\n+            Handles full (PUT) and partial (PATCH) updates for events.\n+            Supports new image uploads and Many-to-Many relationship updates.\n+            \"\"\"\n+            request = self.context.get(\"request\")\n \n-        # Extract Many-to-Many fields\n-        category_ids = validated_data.pop(\"category\", None)\n-        organizer_ids = validated_data.pop(\"organizer\", None)\n+            # Extract Many-to-Many fields\n+            category_ids = validated_data.pop(\"category\", None)\n+            organizer_ids = validated_data.pop(\"organizer\", None)\n \n-        # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n+            # Extract multiple images from `images[0]`, `images[1]`, ...\n+            images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n-        # Update the event instance\n-        instance = super().update(instance, validated_data)\n+            # Update the event instance\n\\ No newline at end of file\n+            instance = super().update(instance, validated_data)\n \n-        # Update Many-to-Many relationships if provided\n-        if category_ids is not None:\n-            instance.category.set(category_ids)\n-        if organizer_ids is not None:\n-            instance.organizer.set(organizer_ids)\n+            # Update Many-to-Many relationships if provided\n+            if category_ids is not None:\n+                instance.category.set(category_ids)\n+            if organizer_ids is not None:\n+                instance.organizer.set(organizer_ids)\n \n-        # Save new images in EventGallery\n-        for image_file in images_data:\n-            EventGallery.objects.create(event=instance, image=image_file)\n+            # Save new images in EventGallery\n+            for image_file in images_data:\n+                EventGallery.objects.create(event=instance, image=image_file)\n \n-        return instance\n+            return instance\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739085095131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,8 +47,9 @@\n \n def str_to_list(data, value_to_convert):\n     \"\"\"\n     Converts a string representation of a list into an actual list if necessary.\n+    Ensures that single values are also wrapped into a list.\n     \"\"\"\n     try:\n         mutable_data = data.dict()  # Convert QueryDict to standard dict if necessary\n     except Exception:\n@@ -58,8 +59,13 @@\n \n     if isinstance(value_to_convert_data, list):\n         return mutable_data  # If already a list, return unchanged\n \n+    # If it's a single item, wrap it in a list\n+    if value_to_convert_data and not isinstance(value_to_convert_data, list):\n+        mutable_data[value_to_convert] = [value_to_convert_data]\n+        return mutable_data\n+\n     try:\n         variations = ast.literal_eval(value_to_convert_data)  # Convert string to list\n         mutable_data[value_to_convert] = variations\n         return mutable_data\n@@ -118,33 +124,33 @@\n             EventGallery.objects.create(event=event, image=image_file)\n \n         return event\n \n-     @transaction.atomic\n-        def update(self, instance, validated_data):\n-            \"\"\"\n-            Handles full (PUT) and partial (PATCH) updates for events.\n-            Supports new image uploads and Many-to-Many relationship updates.\n-            \"\"\"\n-            request = self.context.get(\"request\")\n+    @transaction.atomic\n+    def update(self, instance, validated_data):\n+        \"\"\"\n+        Handles full (PUT) and partial (PATCH) updates for events.\n+        Supports new image uploads and Many-to-Many relationship updates.\n+        \"\"\"\n+        request = self.context.get(\"request\")\n \n-            # Extract Many-to-Many fields\n-            category_ids = validated_data.pop(\"category\", None)\n-            organizer_ids = validated_data.pop(\"organizer\", None)\n+        # Extract Many-to-Many fields\n+        category_ids = validated_data.pop(\"category\", None)\n+        organizer_ids = validated_data.pop(\"organizer\", None)\n \n-            # Extract multiple images from `images[0]`, `images[1]`, ...\n-            images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n+        # Extract multiple images from `images[0]`, `images[1]`, ...\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n-            # Update the event instance\n-            instance = super().update(instance, validated_data)\n\\ No newline at end of file\n+        # Update the event instance\n+        instance = super().update(instance, validated_data)\n \n-            # Update Many-to-Many relationships if provided\n-            if category_ids is not None:\n-                instance.category.set(category_ids)\n-            if organizer_ids is not None:\n-                instance.organizer.set(organizer_ids)\n+        # Update Many-to-Many relationships if provided\n+        if category_ids is not None:\n+            instance.category.set(category_ids)\n+        if organizer_ids is not None:\n+            instance.organizer.set(organizer_ids)\n \n-            # Save new images in EventGallery\n-            for image_file in images_data:\n-                EventGallery.objects.create(event=instance, image=image_file)\n+        # Save new images in EventGallery\n+        for image_file in images_data:\n+            EventGallery.objects.create(event=instance, image=image_file)\n \n-            return instance\n+        return instance\n\\ No newline at end of file\n"
                },
                {
                    "date": 1739085439984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,12 +44,14 @@\n         fields = '__all__'\n \n \n \n+import ast\n+\n def str_to_list(data, value_to_convert):\n     \"\"\"\n     Converts a string representation of a list into an actual list if necessary.\n-    Ensures that single values are also wrapped into a list.\n+    Ensures that single values or comma-separated values are correctly converted into lists of integers.\n     \"\"\"\n     try:\n         mutable_data = data.dict()  # Convert QueryDict to standard dict if necessary\n     except Exception:\n@@ -59,9 +61,19 @@\n \n     if isinstance(value_to_convert_data, list):\n         return mutable_data  # If already a list, return unchanged\n \n-    # If it's a single item, wrap it in a list\n+    # If it's a comma-separated string, convert it to a list of integers\n+    if isinstance(value_to_convert_data, str):\n+        if ',' in value_to_convert_data:\n+            # Split the string by commas, strip spaces, and convert each part to an integer\n+            mutable_data[value_to_convert] = [int(x.strip()) for x in value_to_convert_data.split(',')]\n+        else:\n+            # If it's a single value, convert it to a list of one integer\n+            mutable_data[value_to_convert] = [int(value_to_convert_data.strip())]\n+        return mutable_data\n+\n+    # If it's a single item (not a list or string), wrap it in a list\n     if value_to_convert_data and not isinstance(value_to_convert_data, list):\n         mutable_data[value_to_convert] = [value_to_convert_data]\n         return mutable_data\n \n@@ -72,8 +84,9 @@\n     except ValueError as e:\n         raise serializers.ValidationError({f'{value_to_convert}': str(e)}) from e\n \n \n+\n class EventWriteSerializers(serializers.ModelSerializer):\n     \"\"\"\n     Serializer for handling event creation with multiple images.\n     Uses `str_to_list()` to convert `category` and `organizer` from string to list.\n"
                },
                {
                    "date": 1740389444500,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n-    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n+    images = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     \n     class Meta:\n         model = Event\n         fields = '__all__'\n"
                },
                {
                    "date": 1740389450636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n # Serializer for EventOrganizer\n class EventOrganizerSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventOrganizer\n-        fields = ['id', 'name', 'image', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n+        fields = ['id', 'name', 'images', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n \n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n@@ -37,9 +37,9 @@\n # Serializer for retrieving complete event details (detailed view)\n class EventRetrieveSerializers(serializers.ModelSerializer):\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n-    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n+    images = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n"
                },
                {
                    "date": 1740389457193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n # Serializer for EventOrganizer\n class EventOrganizerSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventOrganizer\n-        fields = ['id', 'name', 'images', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n+        fields = ['id', 'name', 'image', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n \n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n"
                },
                {
                    "date": 1740389464825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventGallery\n-        fields = ['id', 'image', 'is_featured_image', 'created_date_time', 'created_date', 'updated_date']\n+        fields = ['id', 'images', 'is_featured_image', 'created_date_time', 'created_date', 'updated_date']\n \n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n"
                },
                {
                    "date": 1740390127444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n         event.organizer.set(organizer_ids)\n \n         # Save images in EventGallery\n         for image_file in images_data:\n-            EventGallery.objects.create(event=event, image=image_file)\n+            EventGallery.objects.create(event=event, images=image_file)\n \n         return event\n \n     @transaction.atomic\n"
                },
                {
                    "date": 1740390137835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,7 +163,7 @@\n             instance.organizer.set(organizer_ids)\n \n         # Save new images in EventGallery\n         for image_file in images_data:\n-            EventGallery.objects.create(event=instance, image=image_file)\n+            EventGallery.objects.create(event=instance, s=image_file)\n \n         return instance\n\\ No newline at end of file\n"
                },
                {
                    "date": 1740396631381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n # Serializer for EventOrganizer\n class EventOrganizerSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventOrganizer\n-        fields = ['id', 'name', 'image', 'link', 'is_show', 'created_date_time', 'created_date', 'updated_date']\n+        fields = __\n \n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n@@ -163,7 +163,7 @@\n             instance.organizer.set(organizer_ids)\n \n         # Save new images in EventGallery\n         for image_file in images_data:\n-            EventGallery.objects.create(event=instance, s=image_file)\n+            EventGallery.objects.create(event=instance, images=image_file)\n \n         return instance\n\\ No newline at end of file\n"
                },
                {
                    "date": 1740396640355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,15 +13,15 @@\n # Serializer for EventOrganizer\n class EventOrganizerSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventOrganizer\n-        fields = __\n+        fields = '__all__'\n \n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventGallery\n-        fields = ['id', 'images', 'is_featured_image', 'created_date_time', 'created_date', 'updated_date']\n+        fields = \n \n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n"
                },
                {
                    "date": 1740396899872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n # Serializer for EventGallery\n class EventGallerySerializer(serializers.ModelSerializer):\n     class Meta:\n         model = EventGallery\n-        fields = \n+        fields = '__all__'\n \n # Serializer for listing event details (basic view)\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n@@ -37,9 +37,9 @@\n # Serializer for retrieving complete event details (detailed view)\n class EventRetrieveSerializers(serializers.ModelSerializer):\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n-    images = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n+    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     class Meta:\n         model = Event\n         fields = '__all__'\n \n"
                },
                {
                    "date": 1740396923185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n class EventListSerializers(serializers.ModelSerializer):\n     # Nested fields for related models (full object details)\n     category = EventCategorySerializer(many=True,read_only=True)  # Full details of categories\n     organizer = EventOrganizerSerializer(many=True,read_only=True)  # Full details of organizers\n-    images = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n+    image = EventGallerySerializer(many=True,read_only=True)  # Full details of gallery images\n     \n     class Meta:\n         model = Event\n         fields = '__all__'\n@@ -122,9 +122,9 @@\n         category_ids = validated_data.pop(\"category\", [])\n         organizer_ids = validated_data.pop(\"organizer\", [])\n \n         # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"image[\")]\n \n         # Create the Event instance\n         event = super().create(validated_data)\n \n"
                },
                {
                    "date": 1740396935243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n         category_ids = validated_data.pop(\"category\", [])\n         organizer_ids = validated_data.pop(\"organizer\", [])\n \n         # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"image[\")]\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n         # Create the Event instance\n         event = super().create(validated_data)\n \n"
                },
                {
                    "date": 1740396948691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n         event.organizer.set(organizer_ids)\n \n         # Save images in EventGallery\n         for image_file in images_data:\n-            EventGallery.objects.create(event=event, images=image_file)\n+            EventGallery.objects.create(event=event, image=image_file)\n \n         return event\n \n     @transaction.atomic\n@@ -150,9 +150,9 @@\n         category_ids = validated_data.pop(\"category\", None)\n         organizer_ids = validated_data.pop(\"organizer\", None)\n \n         # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"image[\")]\n \n         # Update the event instance\n         instance = super().update(instance, validated_data)\n \n"
                },
                {
                    "date": 1740397059201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,9 +150,9 @@\n         category_ids = validated_data.pop(\"category\", None)\n         organizer_ids = validated_data.pop(\"organizer\", None)\n \n         # Extract multiple images from `images[0]`, `images[1]`, ...\n-        images_data = [file for key, file in request.FILES.items() if key.startswith(\"image[\")]\n+        images_data = [file for key, file in request.FILES.items() if key.startswith(\"images[\")]\n \n         # Update the event instance\n         instance = super().update(instance, validated_data)\n \n@@ -163,7 +163,7 @@\n             instance.organizer.set(organizer_ids)\n \n         # Save new images in EventGallery\n         for image_file in images_data:\n-            EventGallery.objects.create(event=instance, images=image_file)\n+            EventGallery.objects.create(event=instance, image=image_file)\n \n         return instance\n\\ No newline at end of file\n"
                }
            ],
            "date": 1733477390024,
            "name": "Commit-0",
            "content": "from rest_framework import serializers\nfrom ..models import Event, EventCategory, EventOrganizer, EventGallery\n\n# Serializer for listing events (basic view)\nclass EventListSerializers(serializers.ModelSerializer):\n    # Nested fields for related models (just showing names or basic details)\n    category = serializers.StringRelatedField(many=True)  # Show related categories by name\n    organizer = serializers.StringRelatedField(many=True)  # Show related organizers by name\n\n    class Meta:\n        model = Event\n        fields = '__all__'\n\n\n# Serializer for retrieving detailed event information\nclass EventRetrieveSerializers(serializers.ModelSerializer):\n    # Nested fields for related models (showing detailed info)\n    category = serializers.StringRelatedField(many=True)\n    organizer = serializers.StringRelatedField(many=True)\n    gallery = serializers.StringRelatedField(many=True)  # Optional: For retrieving related images\n\n    class Meta:\n        model = Event\n        fields = '__all__'\n\n\n# Serializer for creating or updating events\nclass EventWriteSerializers(serializers.ModelSerializer):\n    # Nested fields for related models\n    category = serializers.PrimaryKeyRelatedField(queryset=EventCategory.objects.all(), many=True)\n    organizer = serializers.PrimaryKeyRelatedField(queryset=EventOrganizer.objects.all(), many=True)\n    gallery = serializers.PrimaryKeyRelatedField(queryset=EventGallery.objects.all(), many=True)\n    \n    class Meta:\n        model = Event\n        fields = [\n            'event_name', 'start_date', 'end_date', 'duration', 'event_type', 'venue', 'online_seat_limit', \n            'offline_seat_limit', 'is_offline_seat_limit', 'is_online_seat_limit', 'is_registration', \n            'registration_link', 'registration_type', 'amount', 'amount_type', 'amount_country', \n            'description', 'is_featured_event', 'category', 'organizer', 'gallery', 'created_date_time', \n            'created_date', 'updated_date'\n        ]\n    \n    def create(self, validated_data):\n        # Handle the creation of related fields (many-to-many relationships)\n        category_data = validated_data.pop('category')\n        organizer_data = validated_data.pop('organizer')\n        gallery_data = validated_data.pop('gallery')\n\n        # Create the Event instance\n        event = Event.objects.create(**validated_data)\n\n        # Handle many-to-many relationships\n        event.category.set(category_data)\n        event.organizer.set(organizer_data)\n        event.gallery.set(gallery_data)\n\n        return event\n\n    def update(self, instance, validated_data):\n        # Handle the updating of related fields (many-to-many relationships)\n        category_data = validated_data.pop('category', None)\n        organizer_data = validated_data.pop('organizer', None)\n        gallery_data = validated_data.pop('gallery', None)\n\n        # Update fields that are present in validated_data\n        for attr, value in validated_data.items():\n            setattr(instance, attr, value)\n        \n        # Update many-to-many relationships\n        if category_data is not None:\n            instance.category.set(category_data)\n        if organizer_data is not None:\n            instance.organizer.set(organizer_data)\n        if gallery_data is not None:\n            instance.gallery.set(gallery_data)\n\n        # Save the updated instance\n        instance.save()\n\n        return instance\n"
        }
    ]
}