{
    "sourceFile": "requestsubmission/viewsets/requestsubmission_viewsets.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 25,
            "patches": [
                {
                    "date": 1733741246630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1733741255166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,18 +8,18 @@\n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n     # permission_classes = [requestsubmissionPermission]\n     # authentication_classes = [JWTAuthentication]\n-    #pagination_class = MyPageNumberPagination\n-    queryset = RequestSubmission.objects.all().order_by('-')\n+    pagination_class = MyPageNumberPagination\n+    queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n     search_fields = ['id']\n     ordering_fields = ['id']\n \n-    # filterset_fields = {\n-    #     'id': ['exact'],\n-    # }\n+    filterset_fields = {\n+        'id': ['exact'],\n+    }\n \n     def get_queryset(self):\n         queryset = super().get_queryset()\n         #return queryset.filter(user_id=self.request.user.id)\n"
                },
                {
                    "date": 1733741261422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,37 @@\n+from rest_framework import viewsets\n+from rest_framework.filters import SearchFilter, OrderingFilter\n+from django_filters.rest_framework import DjangoFilterBackend\n+from ..models import RequestSubmission\n+from ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\n+from ..utilities.importbase import *\n+\n+class requestsubmissionViewsets(viewsets.ModelViewSet):\n+    serializer_class = RequestSubmissionListSerializers\n+    # permission_classes = [requestsubmissionPermission]\n+    # authentication_classes = [JWTAuthentication]\n+    pagination_class = MyPageNumberPagination\n+    queryset = RequestSubmission.objects.all().order_by('-id')\n+\n+    filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n+    search_fields = ['id']\n+    ordering_fields = ['id']\n+\n+    filterset_fields = {\n+        'id': ['exact'],\n+    }\n+\n+    def get_queryset(self):\n+        queryset = super().get_queryset()\n+        #return queryset\n+\n+    def get_serializer_class(self):\n+        if self.action in ['create', 'update', 'partial_update']:\n+            return RequestSubmissionWriteSerializers\n+        elif self.action == 'retrieve':\n+            return RequestSubmissionRetrieveSerializers\n+        return super().get_serializer_class()\n+\n+    # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n+    # def action_name(self, request, *args, **kwargs):\n+    #     return super().list(request, *args, **kwargs)\n+\n"
                },
                {
                    "date": 1733741272359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,18 +12,18 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id']\n+    search_fields = ['id','subject']\n     ordering_fields = ['id']\n \n     filterset_fields = {\n         'id': ['exact'],\n     }\n \n     def get_queryset(self):\n         queryset = super().get_queryset()\n-        #return queryset\n+        return queryset\n \n     def get_serializer_class(self):\n         if self.action in ['create', 'update', 'partial_update']:\n             return RequestSubmissionWriteSerializers\n@@ -34,41 +34,4 @@\n     # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n     # def action_name(self, request, *args, **kwargs):\n     #     return super().list(request, *args, **kwargs)\n \n-from rest_framework import viewsets\n-from rest_framework.filters import SearchFilter, OrderingFilter\n-from django_filters.rest_framework import DjangoFilterBackend\n-from ..models import RequestSubmission\n-from ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\n-from ..utilities.importbase import *\n-\n-class requestsubmissionViewsets(viewsets.ModelViewSet):\n-    serializer_class = RequestSubmissionListSerializers\n-    # permission_classes = [requestsubmissionPermission]\n-    # authentication_classes = [JWTAuthentication]\n-    pagination_class = MyPageNumberPagination\n-    queryset = RequestSubmission.objects.all().order_by('-id')\n-\n-    filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id']\n-    ordering_fields = ['id']\n-\n-    filterset_fields = {\n-        'id': ['exact'],\n-    }\n-\n-    def get_queryset(self):\n-        queryset = super().get_queryset()\n-        #return queryset.filter(user_id=self.request.user.id)\n-\n-    def get_serializer_class(self):\n-        if self.action in ['create', 'update', 'partial_update']:\n-            return RequestSubmissionWriteSerializers\n-        elif self.action == 'retrieve':\n-            return RequestSubmissionRetrieveSerializers\n-        return super().get_serializer_class()\n-\n-    # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n-    # def action_name(self, request, *args, **kwargs):\n-    #     return super().list(request, *args, **kwargs)\n-\n"
                },
                {
                    "date": 1733741278280,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,10 +12,10 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject']\n-    ordering_fields = ['id']\n+    search_fields = ['id','subject','description']\n+    ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n     }\n"
                },
                {
                    "date": 1733741283745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,9 @@\n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n+        'subject': ['exact'],\n     }\n \n     def get_queryset(self):\n         queryset = super().get_queryset()\n"
                },
                {
                    "date": 1738748596741,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n     # permission_classes = [requestsubmissionPermission]\n-    # authentication_classes = [JWTAuthentication]\n+    authentication_classes = [JWTAuthentication]\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n"
                },
                {
                    "date": 1739264917932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n from ..utilities.importbase import *\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n-    # permission_classes = [requestsubmissionPermission]\n+    permission_classes = [requestsubmissionPermission]\n     authentication_classes = [JWTAuthentication]\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n"
                },
                {
                    "date": 1739509693207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n from django_filters.rest_framework import DjangoFilterBackend\n from ..models import RequestSubmission\n from ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\n from ..utilities.importbase import *\n+from mainproj.\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n     permission_classes = [requestsubmissionPermission]\n"
                },
                {
                    "date": 1739509698470,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n from django_filters.rest_framework import DjangoFilterBackend\n from ..models import RequestSubmission\n from ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\n from ..utilities.importbase import *\n-from mainproj.\n+from mainproj.permissions impo\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n     permission_classes = [requestsubmissionPermission]\n"
                },
                {
                    "date": 1744690573721,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,13 +3,13 @@\n from django_filters.rest_framework import DjangoFilterBackend\n from ..models import RequestSubmission\n from ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\n from ..utilities.importbase import *\n-from mainproj.permissions impo\n+from mainproj.permissions import DynamicModelPermission\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n-    permission_classes = [requestsubmissionPermission]\n+    permission_classes = [DynamicModelPermission]\n     authentication_classes = [JWTAuthentication]\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n@@ -31,8 +31,13 @@\n             return RequestSubmissionWriteSerializers\n         elif self.action == 'retrieve':\n             return RequestSubmissionRetrieveSerializers\n         return super().get_serializer_class()\n+    \n+        def get_serializer_context(self):\n+        context = super().get_serializer_context()\n+        context.update({'request': self.request})  # ðŸ‘ˆ Pass request to serializer\n+        return context\n \n     # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n     # def action_name(self, request, *args, **kwargs):\n     #     return super().list(request, *args, **kwargs)\n"
                },
                {
                    "date": 1744690580281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n         elif self.action == 'retrieve':\n             return RequestSubmissionRetrieveSerializers\n         return super().get_serializer_class()\n     \n-        def get_serializer_context(self):\n+    def get_serializer_context(self):\n         context = super().get_serializer_context()\n         context.update({'request': self.request})  # ðŸ‘ˆ Pass request to serializer\n         return context\n \n"
                },
                {
                    "date": 1744690586572,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n         return super().get_serializer_class()\n     \n     def get_serializer_context(self):\n         context = super().get_serializer_context()\n-        context.update({'request': self.request})  # ðŸ‘ˆ Pass request to serializer\n+        context.update({'request': self.request})  # Pass request to serializer\n         return context\n \n     # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n     # def action_name(self, request, *args, **kwargs):\n"
                },
                {
                    "date": 1744690652946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n+        user\n         'subject': ['exact'],\n     }\n \n     def get_queryset(self):\n"
                },
                {
                    "date": 1744690658581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n-        user\n+        'user': ['exact'],\n         'subject': ['exact'],\n     }\n \n     def get_queryset(self):\n"
                },
                {
                    "date": 1744690665122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject','description']\n+    search_fields = ['id','subject','description','']\n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n"
                },
                {
                    "date": 1744690672067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject','description','']\n+    search_fields = ['id','subject','description','user__username',''] \n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n"
                },
                {
                    "date": 1744690682342,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject','description','user__username',''] \n+    search_fields = ['id','subject','description','user__username','user__'] \n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n"
                },
                {
                    "date": 1744690687972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject','description','user__username','user__'] \n+    search_fields = ['id','subject','description','user__username','user__first_name','user__last_name'] \n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n"
                },
                {
                    "date": 1744690715551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n-    search_fields = ['id','subject','description','user__username','user__first_name','user__last_name'] \n+    search_fields = ['id','subject','description','user__username','user__first_name'] \n     ordering_fields =  ['id','subject','description']\n \n     filterset_fields = {\n         'id': ['exact'],\n"
                },
                {
                    "date": 1744727966120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n class requestsubmissionViewsets(viewsets.ModelViewSet):\n     serializer_class = RequestSubmissionListSerializers\n     permission_classes = [DynamicModelPermission]\n-    authentication_classes = [JWTAuthentication]\n+    # authentication_classes = [JWTAuthentication]\n     pagination_class = MyPageNumberPagination\n     queryset = RequestSubmission.objects.all().order_by('-id')\n \n     filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n"
                },
                {
                    "date": 1744728713772,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,11 +22,19 @@\n         'user': ['exact'],\n         'subject': ['exact'],\n     }\n \n-    def get_queryset(self):\n+  def get_queryset(self):\n         queryset = super().get_queryset()\n-        return queryset\n+        #TODO only super user can view this data\n+        if self.request.user.is_superuser:\n+            queryset = self.queryset\n+            return queryset\n+        else:\n+            queryset = self.queryset.filter(user=self.request.user)\n+            return queryset\n+        \n+        return None\n \n     def get_serializer_class(self):\n         if self.action in ['create', 'update', 'partial_update']:\n             return RequestSubmissionWriteSerializers\n"
                },
                {
                    "date": 1744728720052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,19 +22,19 @@\n         'user': ['exact'],\n         'subject': ['exact'],\n     }\n \n-  def get_queryset(self):\n+    def get_queryset(self):\n         queryset = super().get_queryset()\n-        #TODO only super user can view this data\n-        if self.request.user.is_superuser:\n-            queryset = self.queryset\n-            return queryset\n-        else:\n-            queryset = self.queryset.filter(user=self.request.user)\n-            return queryset\n-        \n-        return None\n+            #TODO only super user can view this data\n+            if self.request.user.is_superuser:\n+                queryset = self.queryset\n+                return queryset\n+            else:\n+                queryset = self.queryset.filter(user=self.request.user)\n+                return queryset\n+            \n+            return None\n \n     def get_serializer_class(self):\n         if self.action in ['create', 'update', 'partial_update']:\n             return RequestSubmissionWriteSerializers\n"
                },
                {
                    "date": 1744728725730,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,19 +22,19 @@\n         'user': ['exact'],\n         'subject': ['exact'],\n     }\n \n-    def get_queryset(self):\n+  def get_queryset(self):\n         queryset = super().get_queryset()\n-            #TODO only super user can view this data\n-            if self.request.user.is_superuser:\n-                queryset = self.queryset\n-                return queryset\n-            else:\n-                queryset = self.queryset.filter(user=self.request.user)\n-                return queryset\n-            \n-            return None\n+        #TODO only super user can view this data\n+        if self.request.user.is_superuser:\n+            queryset = self.queryset\n+            return queryset\n+        else:\n+            queryset = self.queryset.filter(user=self.request.user)\n+            return queryset\n+        \n+        return None\n \n     def get_serializer_class(self):\n         if self.action in ['create', 'update', 'partial_update']:\n             return RequestSubmissionWriteSerializers\n"
                },
                {
                    "date": 1744728734854,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,10 @@\n         'user': ['exact'],\n         'subject': ['exact'],\n     }\n \n-  def get_queryset(self):\n+    def get_queryset(self):\n+        \n         queryset = super().get_queryset()\n         #TODO only super user can view this data\n         if self.request.user.is_superuser:\n             queryset = self.queryset\n"
                },
                {
                    "date": 1744728816830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,20 +23,20 @@\n         'subject': ['exact'],\n     }\n \n     def get_queryset(self):\n-        \n-        queryset = super().get_queryset()\n-        #TODO only super user can view this data\n-        if self.request.user.is_superuser:\n-            queryset = self.queryset\n-            return queryset\n-        else:\n-            queryset = self.queryset.filter(user=self.request.user)\n-            return queryset\n-        \n-        return None\n+    if not self.request.user.is_authenticated:\n+        return None  # Return None if the user is not authenticated\n+    \n+    queryset = super().get_queryset()  # Get the base queryset\n+    \n+    # TODO only superuser can view this data\n+    if self.request.user.is_superuser:\n+        return queryset  # Return the base queryset for superusers\n+    else:\n+        return queryset.filter(user=self.request.user)  # Filter queryset for non-superusers\n \n+\n     def get_serializer_class(self):\n         if self.action in ['create', 'update', 'partial_update']:\n             return RequestSubmissionWriteSerializers\n         elif self.action == 'retrieve':\n"
                }
            ],
            "date": 1733741246630,
            "name": "Commit-0",
            "content": "from rest_framework import viewsets\nfrom rest_framework.filters import SearchFilter, OrderingFilter\nfrom django_filters.rest_framework import DjangoFilterBackend\nfrom ..models import RequestSubmission\nfrom ..serializers.requestsubmission_serializers import RequestSubmissionListSerializers, RequestSubmissionRetrieveSerializers, RequestSubmissionWriteSerializers\nfrom ..utilities.importbase import *\n\nclass requestsubmissionViewsets(viewsets.ModelViewSet):\n    serializer_class = RequestSubmissionListSerializers\n    # permission_classes = [requestsubmissionPermission]\n    # authentication_classes = [JWTAuthentication]\n    #pagination_class = MyPageNumberPagination\n    queryset = RequestSubmission.objects.all().order_by('-')\n\n    filter_backends = [SearchFilter, DjangoFilterBackend, OrderingFilter]\n    search_fields = ['id']\n    ordering_fields = ['id']\n\n    # filterset_fields = {\n    #     'id': ['exact'],\n    # }\n\n    def get_queryset(self):\n        queryset = super().get_queryset()\n        #return queryset.filter(user_id=self.request.user.id)\n\n    def get_serializer_class(self):\n        if self.action in ['create', 'update', 'partial_update']:\n            return RequestSubmissionWriteSerializers\n        elif self.action == 'retrieve':\n            return RequestSubmissionRetrieveSerializers\n        return super().get_serializer_class()\n\n    # @action(detail=False, methods=['get'], name=\"action_name\", url_path=\"url_path\")\n    # def action_name(self, request, *args, **kwargs):\n    #     return super().list(request, *args, **kwargs)\n\n"
        }
    ]
}